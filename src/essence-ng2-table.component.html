<table class="table table-bordered essence-table">
	<thead>
		<tr class="bg-info">
			<td *ngIf="config.columns.batch.enabled" class="text-center">
				<input type="checkbox" [checked]="batchAllCheckStatus" (change)="checkboxAllChangeEvent($event)">
			</td>
			<th *ngIf="config.columns.index.enabled" class="text-nowrap text-center">序号</th>
			<ng-container *ngFor="let column of config.columns.items;">
				<th *ngIf="column.visible" class="text-nowrap" [class.order]="column.order" [ngClass]="column.cls" (click)="sort(column)" [attr.width]="column.width">
					{{column.label}} <i class="fa hidden-print" *ngIf="column.order" [ngClass]="{'fa-sort text-muted': column.order === 'sort' || column.order === true, 'fa-sort-asc': column.order === 'asc', 'fa-sort-desc': column.order === 'desc'}"></i>
				</th>
			</ng-container>
		</tr>
	</thead>
	<tbody *ngIf="tableData">
		<ng-container *ngFor="let data of tableData.pageInfo.items; trackBy: trackById; let dataIndex = index;">
			<tr>
				<td *ngIf="config.columns.batch.enabled" class="text-center">
					<input type="checkbox"
					       [checked]="data.selected"
					       (change)="checkboxChangeEvent($event,data)">
				</td>
				<td *ngIf="config.columns.index.enabled" class="text-center">{{dataIndex + tableData.pageInfo.beginRecord}}</td>
				<ng-container *ngFor="let column of config.columns.items;">
					<td *ngIf="column.visible" [ngClass]="column.cls">
						<div *ngIf="column.colName && isFunction(column.render) && column.render(data)" [innerHTML]="domSanitizer.bypassSecurityTrustHtml(column.render(data))"></div>
						<div *ngIf="column.colName && (!isFunction(column.render) || !column.render(data))" [innerHTML]="domSanitizer.bypassSecurityTrustHtml(data[column.colName])"></div>
						<div *ngIf="!column.colName">
							<ng-container *ngFor="let button of column.render;">
								<button *ngIf="!isFunction(button.exist) || button.exist(data)" type="button" class="btn" [ngClass]="button.cls" (click)="button.event(data)">{{button.text}}</button>
							</ng-container>
						</div>
					</td>
				</ng-container>
			</tr>
		</ng-container>
	</tbody>
	<tfoot class="hidden-print">
		<tr>
			<td *ngIf="config.columns.batch.enabled" class="text-center">
			</td>
			<td *ngIf="config.columns.index.enabled"></td>
			<ng-container *ngFor="let column of config.columns.items;let columnIndex=index;">
				<td *ngIf="column.visible">
					<div *ngIf="column.filterProp.enabled">
						<input type="text" class="form-control" (keyup)="filter($event, column)" *ngIf="column.filterProp.type === 'string'" [placeholder]="column.label">
						<select class="form-control" (change)="filter($event, column)" *ngIf="column.filterProp.type === 'select'">
							<option value="">全部</option>
							<option *ngFor="let s of column.filterProp.data" [value]="s.value">{{s.text}}</option>
						</select>
						<input type="date" class="form-control" (change)="filter($event, column)" *ngIf="column.filterProp.type === 'date'">
					</div>
				</td>
			</ng-container>
		</tr>
	</tfoot>
</table>
<div class="row" *ngIf="tableData">
	<div class="col-sm-6">
		显示 {{tableData.pageInfo.beginRecord}} 到 {{tableData.pageInfo.endRecord}} 条，共 {{tableData.pageInfo.totalRecords}} 条数据
	</div>
	<div class="col-sm-6 hidden-print">
		<div class="btn-toolbar pull-right" role="toolbar" *ngIf="tableData.pageInfo.totalRecords > 0">
			<div class="btn-group">
				<button type="button" class="btn btn-sm btn-default" (click)="prePage()" [disabled]="tableData.pageInfo.currentPageNum == 1"><i class="fa fa-chevron-left"></i></button>
			</div>
			<div class="btn-group">
				<ng-container *ngFor="let b of numberArray(tableData.pageInfo.totalPages)">
					<button *ngIf="generateForButton(b, tableData.pageInfo.currentPageNum, numberArray(tableData.pageInfo.totalPages).length)" class="btn btn-sm btn-default" [disabled]="generateForText(b, tableData.pageInfo.currentPageNum, numberArray(tableData.pageInfo.totalPages).length)==='...'" [ngClass]="{active: b == tableData.pageInfo.currentPageNum}" (click)="toPage(generateForText(b, tableData.pageInfo.currentPageNum, numberArray(tableData.pageInfo.totalPages).length)==='...'?-1:b)" >
						{{generateForText(b, tableData.pageInfo.currentPageNum, numberArray(tableData.pageInfo.totalPages).length)}}
					</button>
				</ng-container>
			</div>
			<div class="btn-group">
				<button type="button" class="btn btn-sm btn-default" (click)="nextPage()" [disabled]="tableData.pageInfo.currentPageNum == tableData.pageInfo.totalPages"><i class="fa fa-chevron-right"></i></button>
			</div>
		</div>
	</div>
</div>
